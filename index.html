<!--
 * @Author: chen wei
 * @Date: 2022-12-08 14:28:15
 * @LastEditTime: 2023-03-01 09:42:48
 * @Description: 
-->
<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script type="text/javascript" src="./cloud-render-api.1.3.0.umd.min(6).js"></script>
    <script src="./jquery.min.js"></script>
    <style type="text/css">
        #myframe {
            width: calc(100vw);
            height: calc(40vw) !important;
            background-color: #000;
            overflow: auto;
        }
    </style>
</head>

<body>
    <button onclick="getLayers_f()">test</button>
    <button onclick="addKafka2()">test2</button>
    
    <iframe id="myframe" src="" frameborder="0" style="background-color: #000 !important;"></iframe>
    <script>
        var scene,layerId
        $().ready(function() {
            initScene_local();
        });
        function initScene_local() {
            console.log('start');
            scene = new CloudRenderApi.Scene('myframe', {
                sceneID: "1077617867718918144", //200
                server: "http://192.168.102.200:8181", // 本地服务地址
                saas: true
            })
            window.scene = scene
            scene.on('left_click',(res) => {
                console.log(res);
            })
        }

        function getLayers_f(){
            scene.addMarker({
                layerId: "point_layer1",
                entityId: "11",
                coordinate: {
                    lat: "34.43464755965049",
                    lon: "108.76134820565085",
                    height: "1"
                },
                text: "TAerefewfcfefsfseG",
                fontSize: 15,//字体大小 
                fontColor: "#ffffff",
                backgroundColor:"#ffffff",
                url: "https://cn.bing.com/rp/STusdSn-T6WCaX2mhBbpuWWRBHs.svg",
                "imgSize": 2,//图片等比适配变换(最大限制为32)后，再乘imgSize做大小缩放。
                "offsetX":0,//文本在X轴上的偏移量
                "offsetY":0//文本在Y轴上的偏移量
                }).then((res) => {
                console.log(res)
                });
        }
        function addKafka2 () {
            scene.addLayer({
                layers: [
                {
                    layerId: 'monitorModel',
                    visible: true,
                    layerType: 'streamLayer',
                    dataSource: {
                        type: 'kafka',
                        url: '192.168.102.14',
                        port: 6667,
                        topic: 'morepointkafkaout',
                        interval: 1000
                    },
                    mapping: {
                        id: 'FLIGHTNO',
                        lat: 'GEOY',
                        lon: 'GEOX',
                        height: 'GEOH',
                        direction: ''
                    },
                    layers: [
                    {
                        filter: {
                        fieldName: '',
                        fieldValue: ''
                        },
                        path: '/BNAssetLibrary/Assets/Model_Library/Industry_library/机场资产/飞行区/机坪/A320/Air_A_A_A320.Air_A_A_A320'
                    }
                    ]
                }
                ]
            }).then((res) => {
                console.log('ccc');
                console.log(res)
            })
            }
        
    </script>
</body>

</html>